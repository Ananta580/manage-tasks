<div class="flex gap-3">
  <section
    class="flex fixed flex-col w-auto min-w-[250px] bg-slate-100 justify-between pt-6 h-screen"
  >
    <div class="flex flex-col">
      <div
        (click)="changeTaskType(tab.key)"
        *ngFor="let tab of tabs"
        [ngClass]="tab.key === selectedTab ? 'bg-slate-200' : 'text-slate-400'"
        class="p-3 mx-6 rounded-md cursor-pointer font-normal flex gap-2"
      >
        <span
          class="material-symbols-outlined"
          [ngClass]="tab.key === selectedTab ? 'fill' : ''"
        >
          {{ tab.icon }} </span
        >{{ tab.title }}
      </div>
    </div>
  </section>

  <section class="ml-[250px] p-6 flex w-full flex-col">
    <div
      cdkDropList
      (cdkDropListDropped)="drop($event)"
      *ngIf="(tasks$ | async)!.length > 0; else emptyTemplate"
    >
      <div
        cdkDrag
        class="py-2 border-b-[1px] border-[#E2E2E2] flex w-full justify-between items-center bg-[#f9f9f9]"
        *ngFor="let task of tasks$ | async"
      >
        <div class="flex gap-3">
          <div>
            <span
              (click)="changeStatus(task)"
              [ngClass]="{
                'text-blue-600': task.done,
                'text-gray-300 hover:text-blue-200': !task.done
              }"
              class="material-symbols-outlined text-xl cursor-pointer font-semibold"
            >
              {{ task.done ? "check_circle" : "radio_button_unchecked" }}
            </span>
          </div>
          <!-- Title & Description -->
          <div class="flex flex-col">
            <span class="font-medium text-lg text-gray-700">{{
              task.title
            }}</span>
            <span class="text-gray-500">{{ task.description }}</span>
          </div>
        </div>

        <div class="flex gap-3">
          <div
            (click)="editTask(task.id)"
            class="flex justify-center text-sm font-medium items-center border-[1px] border-gray-200 rounded-full px-2 py-1 gap-2 text-gray-300 cursor-pointer hover:text-blue-500 hover:border-blue-500"
          >
            <span class="material-symbols-outlined text-sm"> edit </span>Edit
          </div>
          <div
            (click)="deleteTask(task.id)"
            class="flex justify-center text-sm font-medium items-center border-[1px] border-gray-200 rounded-full px-2 py-1 gap-2 text-gray-300 cursor-pointer hover:text-gray-500 hover:border-gray-500"
          >
            <span class="material-symbols-outlined text-sm"> delete </span
            >Remove
          </div>
        </div>
      </div>
    </div>
    <ng-template #emptyTemplate>
      <div
        class="text-gray-300 justify-center flex items-center flex-col gap-6 h-80 mr-10"
      >
        <span class="material-symbols-outlined text-8xl"> devices_fold </span>
        <h1 class="text-lg">Chill out, you don't have any task</h1>
        <h1
          [routerLink]="'/app/task'"
          class="text-lg border-2 rounded-md border-gray-200 text-gray-300 p-2 cursor-pointer"
        >
          + Add new task
        </h1>
      </div>
    </ng-template>
  </section>
</div>
