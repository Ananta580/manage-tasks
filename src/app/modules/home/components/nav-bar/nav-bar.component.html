<div
  class="fixed top-0 w-full z-10 bg-gradient-to-r from-black to-blue-900 shadow-sm"
>
  <div class="flex justify-between items-center px-8 py-3">
    <div class="flex items-center gap-6">
      <p class="text-white text-2xl">
        {{ currentDate$ | async | date : "hh:mm a" }}
      </p>
      <!-- "Good morning" Message -->
      <div class="text-white text-lg">
        <span class="font-light">{{ greeting }} </span>
        <span class="font-normal">{{ user$ | async }}</span>
      </div>
    </div>

    <!-- User Actions -->
    <div class="flex items-center gap-2">
      <input
        id="search"
        placeholder="Search"
        class="p-2 px-5 mr-5 bg-white rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      <!-- Add Task Button -->
      <button
        routerLink="/app/task"
        class="h-10 w-10 flex justify-center items-center bg-white hover:bg-[#ffffff44] rounded-full text-blue-600"
      >
        <mat-icon>add</mat-icon>
      </button>

      <!-- Notifications Button -->
      <button
        class="h-10 w-10 flex justify-center items-center bg-transparent hover:bg-[#ffffff44] rounded-full text-white"
      >
        <mat-icon>notifications</mat-icon>
      </button>

      <!-- Settings Button -->
      <button
        cdkOverlayOrigin
        #trigger="cdkOverlayOrigin"
        (click)="showSettingPopup = !showSettingPopup"
        class="h-10 w-10 flex justify-center items-center bg-transparent hover:bg-[#ffffff44] rounded-full text-white"
      >
        <mat-icon>settings</mat-icon>
      </button>

      <!-- User Avatar Button -->
      <button
        class="h-10 w-10 flex justify-center items-center bg-gray-400 hover:bg-[#ffffff44] rounded-full text-white"
      >
        <span>
          {{ (user$ | async)!.split(" ")[0][0]
          }}{{
            (user$ | async)!.split(" ")[1]
              ? (user$ | async)!.split(" ")[1][0]
              : ""
          }}
        </span>
      </button>
    </div>
  </div>

  <!-- Setting Popup -->
  <ng-template
    cdkConnectedOverlay
    cdkConnectedOverlayBackdropClass="cdk-overlay-transparent-backdrop"
    [cdkConnectedOverlayHasBackdrop]="true"
    [cdkConnectedOverlayOrigin]="trigger"
    [cdkConnectedOverlayOpen]="showSettingPopup"
    (backdropClick)="showSettingPopup = false"
  >
    <ul class="bg-gray-50 m-2 shadow-md rounded-sm min-w-[190px]">
      <li
        class="p-4 flex gap-3 cursor-pointer hover:bg-slate-200"
        (click)="clearMyData()"
      >
        <mat-icon>clear</mat-icon>Clear my data
      </li>
      <li
        class="p-4 flex gap-3 cursor-pointer hover:bg-slate-200"
        (click)="updateProfile()"
      >
        <mat-icon>account_circle</mat-icon>Update Profile
      </li>
      <li class="p-4 flex gap-3 cursor-pointer hover:bg-slate-200">
        <mat-icon>public</mat-icon>Switch online
      </li>
    </ul>
  </ng-template>
</div>
